<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="/static/css/analytics.css?v=5" rel="stylesheet">
</head>

<body>

<main>
    <header class="stats-header">
        <h1 class="stats-title">Data Insights Dashboard</h1>
    </header>

    {% if meta and meta.start and meta.end %}
    <section class="time-stage-container">
        <div class="time-stage">
            <div class="time-label">
                <i class="fa-regular fa-calendar-check"></i> Analysis Window
            </div>

            <div class="time-display">
                <span>{{ meta.start.strftime('%Y-%m-%d %H:%M') }}</span>
                <span class="time-divider">&mdash;</span>
                <span>{{ meta.end.strftime('%Y-%m-%d %H:%M') }}</span>
            </div>

            <a href="/analytics" class="edit-time-btn" title="Change Time Range">
                <i class="fa-solid fa-pen-to-square"></i>
            </a>
        </div>
    </section>
    {% endif %}

    <section class="hero-section">
        <div class="hero-card">
            <div class="hero-metric primary">
                <div class="hero-label">Total Classified Items</div>
                <div class="hero-value">{{ total.count or 0 }}</div>
            </div>

            <div class="hero-metric">
                <div class="hero-label">Total Processed Weight</div>
                <div class="hero-value">
                    {{ total.weight or 0 }}<span style="font-size: 1.5rem; opacity: 0.7; margin-left: 5px;">kg</span>
                </div>
            </div>
        </div>
    </section>

    <section class="grid-container">
        {% for c in classifications %}
            <div class="stat-card">
                <div class="card-header stacked">
                <div class="card-title">{{ c.arabic_name }}</div>
                <div class="thumb-container">
                    <img src="{{ c.thumb }}" alt="{{ c.name }}" onerror="this.src='https://placehold.co/100x100/1e293b/FFF?text={{c.name[:1]}}'">
                </div>
            </div>

            <div class="card-metric-large">{{ c.count }}</div>

            <div class="card-footer">
                <span>Weight</span>
                <span class="weight-tag">{{ (c.weight * c.count) or 0 }} kg</span>
            </div>
        </div>
        {% endfor %}
    </section>
</main>

</body>
</html>